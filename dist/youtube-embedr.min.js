/*! youtube-embedr - v0.0.1 - 2014-10-27 */

!function(a,b){b["true"]=a,function(){"use strict";var a='<iframe class="ytIframe" width="%WIDTH%" height="%HEIGHT%" src="//www.youtube.com/embed/%ID%?%PARAMS%" frameborder="0" autoplay=1 allowfullscreen ></iframe>',b=/iPhone|iPod|iPad|Android|BlackBerry/i,c=window.navigator.userAgent.match(b),d=function(a){var b=this;return b.elem=$(a),b.params="autoplay=1",b.ratio=[16,9],b.setSize(),b.setDefaultBgImage(),b.addPlayButton(),b.elem.data("fluid")&&$(window).on("resize",function(){b.resize()}),b.hideTitle()?b:(b.getTitleBarText().then(function(a){b.addTitleBar(a.entry.title.$t),b.elem.find(".play").before(b.elem.find(".text")),b.setClick()}),b)};d.prototype.resize=function(){var a=this.elem;a.height(a.width()*this.ratio[1]/this.ratio[0]+"px")},d.prototype.hideTitle=function(){return"false"===this.elem.attr("data-title")?(this.setClick(),this.elem.find(".play").css("top","50%"),!0):!1},d.prototype.getId=function(){return this.elem.attr("id")},d.prototype.setSize=function(){var a=this.elem;0===a.height()?a.height(a.width()*this.ratio[1]/this.ratio[0]+"px"):0===a.width()&&a.width(a.height()*this.ratio[0]/this.ratio[1]+"px")},d.prototype.setDefaultBgImage=function(){this.bgUrl="http://i.ytimg.com/vi/"+this.getId()+"/hqdefault.jpg",this.elem.css("background-image","url("+this.bgUrl+")")},d.prototype.addPlayButton=function(){this.elem.append('<div class="play"></div>')},d.prototype.getTitleBarText=function(){return $.ajax({url:"http://gdata.youtube.com/feeds/api/videos/"+this.getId()+"?v=2&fields=id,title&alt=json",dataType:"jsonp"})},d.prototype.addTitleBar=function(a){this.elem.append('<a class="text" target="_blank" href="https://www.youtube.com/watch?v='+this.elem.attr("id")+'">'+a+"</a>"),this.elem.find(".text").slideDown()},d.prototype.addParams=function(a){this.params+=a},d.prototype.setClick=function(){var a=this;this.elem.on("click",function(b){return b.stopPropagation(),c?(window.location="https://www.youtube.com/watch?v="+a.getId(),!1):void a.elem.replaceWith(a.iframeGenerator())}),this.elem.find(".text").click(function(a){a.stopPropagation()})},d.prototype.iframeGenerator=function(){return a.replace(/%WIDTH%/g,this.elem.width()).replace(/%HEIGHT%/g,this.elem.height()).replace(/%ID%/g,this.elem.attr("id")).replace(/%PARAMS%/g,this.params)},$.fn.yt=function(){return this.each(function(){var a=$(this),b=new d(a);return b})}}()}({},function(){return this}());