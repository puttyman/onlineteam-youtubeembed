/*! youtube-embedr - v0.0.1 - 2014-10-24 */

!function(a,b){"use strict";b["true"]=a;var c='<iframe class="ytIframe" width="%WIDTH%" height="%HEIGHT%" src="//www.youtube.com/embed/%ID%?%PARAMS%" frameborder="0" autoplay=1 allowfullscreen ></iframe>',d=/iPhone|iPod|iPad|Android|BlackBerry/i,e=window.navigator.userAgent.match(d),f=function(a){var b=this;b.elem=$(a),b.params="autoplay=1",b.ratio=[16,9],b.run=function(){b.setSize(),b.setDefaultBgImage(),b.addPlayButton(),b.hideTitle()||b.getTitleBarText().then(function(a){b.addTitleBar(a.entry.title.$t),b.elem.find(".play").before(b.elem.find(".text"))}).fail(function(){window.console&&console.error("Error loading youtube title: "+b.getId())}).always(function(){b.setClick()})}};f.prototype.hideTitle=function(){return"false"===this.elem.attr("data-title")?(this.setClick(),this.elem.find(".play").css("top","50%"),!0):!1},f.prototype.getId=function(){return this.elem.attr("id")},f.prototype.setSize=function(){var a=this.elem;0===a.height()?a.height(a.width()*this.ratio[1]/this.ratio[0]+"px"):0===a.width()&&a.width(a.height()*this.ratio[0]/this.ratio[1]+"px")},f.prototype.setDefaultBgImage=function(){this.bgUrl="http://i.ytimg.com/vi/"+this.getId()+"/hqdefault.jpg",this.elem.css("background-image","url("+this.bgUrl+")")},f.prototype.addPlayButton=function(){this.elem.append('<div class="play"></div>')},f.prototype.getTitleBarText=function(){return $.ajax({url:"http://gdata.youtube.com/feeds/api/videos/"+this.getId()+"?v=2&fields=id,title&alt=json",dataType:"jsonp"})},f.prototype.addTitleBar=function(a){this.elem.append('<a class="text" target="_blank" href="https://www.youtube.com/watch?v='+this.elem.attr("id")+'">'+a+"</a>"),this.elem.find(".text").slideDown()},f.prototype.addParams=function(a){this.params+=a},f.prototype.setClick=function(){var a=this;this.elem.click(function(b){return b.stopPropagation(),e?(window.location="https://www.youtube.com/watch?v="+a.getId(),!1):void a.elem.replaceWith(a.iframeGenerator())}),this.elem.find(".text").click(function(a){a.stopPropagation()})},f.prototype.iframeGenerator=function(){return c.replace(/%WIDTH%/g,this.elem.width()).replace(/%HEIGHT%/g,this.elem.height()).replace(/%ID%/g,this.elem.attr("id")).replace(/%PARAMS%/g,this.params)}}({},function(){return this}());